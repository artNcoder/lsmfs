# LSMFS

ä¸€ä¸ªåŸºäº **LSM-tree** å’Œ **FUSE** æ¶æ„æ„å»ºçš„é«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿã€‚

[ğŸ‡ºğŸ‡¸ English](README.md) | [ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡](README.zh_CN.md)

---

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [ä¾èµ–ç¯å¢ƒ](#ä¾èµ–ç¯å¢ƒ)
- [å®‰è£…æ­¥éª¤](#å®‰è£…æ­¥éª¤)
- [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
- [å…¼å®¹æ€§](#å…¼å®¹æ€§)

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**LSMFS** æ˜¯ä¸€ä¸ªç”¨æˆ·æ€æ–‡ä»¶ç³»ç»Ÿï¼Œç»“åˆäº† [RocksDB](https://github.com/facebook/rocksdb) çš„é«˜æ€§èƒ½é”®å€¼å­˜å‚¨å¼•æ“å’Œ [FUSE](https://github.com/libfuse/libfuse) æ¡†æ¶ã€‚å®ƒé€‚ç”¨äºé«˜ååé‡æ–‡ä»¶æ“ä½œçš„å®éªŒæ€§æˆ–æ•™å­¦ç¯å¢ƒã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

ä¸‹å›¾å±•ç¤ºäº† LSMFS çš„æ•´ä½“æ¶æ„ï¼š

<img src="pics/LSMFS_structure.png" alt="LSMFS æ¶æ„å›¾" width="50%" />

---

## ğŸ“¦ ä¾èµ–ç¯å¢ƒ

### FUSE

å®‰è£… FUSE å¼€å‘åº“ï¼š

```bash
sudo apt-get install libfuse-dev
```

### RocksDB

å®‰è£… RocksDB æ‰€éœ€çš„ä¾èµ–é¡¹ï¼š

```bash
sudo apt-get install build-essential
sudo apt-get install libsnappy-dev zlib1g-dev libbz2-dev libgflags-dev
```

å…‹éš† RocksDB æºä»£ç ï¼š

```bash
git clone https://github.com/facebook/rocksdb.git
```

------

## âš™ï¸ å®‰è£…æ­¥éª¤

è¯·ç¡®ä¿ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
å½“å‰ç›®å½•
â”œâ”€â”€ lsm_fuse     # LSMFS æºç ç›®å½•
â””â”€â”€ rocksdb      # å…‹éš†çš„ RocksDB ç›®å½•
```

ç¼–è¯‘é¡¹ç›®ï¼š

```bash
cd lsm_fuse
./compile.sh
```

------

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ

```bash
mkdir /tmp/mnt
./lsmfs /tmp/mnt mydb
```

### æµ‹è¯•æ–‡ä»¶ç³»ç»Ÿ

ç°åœ¨å¯ä»¥ä½¿ç”¨å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œå‘½ä»¤ï¼Œå¦‚ `touch`ã€`cat`ã€`vi` ç­‰ï¼š

```bash
cd /tmp/mnt
touch testfile
cat testfile
```

### å¸è½½æ–‡ä»¶ç³»ç»Ÿ

```bash
fusermount -u /tmp/mnt
```

------

## âœ… å…¼å®¹æ€§

- å·²é€šè¿‡ `pjdfstests` æµ‹è¯•å¥—ä»¶ä¸­çš„ **8,832** ä¸ªæ–‡ä»¶æ“ä½œç›¸å…³æµ‹è¯•ç”¨ä¾‹ï¼Œè¡¨ç°ç¨³å®šã€‚

------

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [Apache License 2.0](LICENSE) åè®®å‘å¸ƒã€‚

------

## ğŸ¤ å‚ä¸è´¡çŒ®

æ¬¢è¿æäº¤ Issues å’Œ PRï¼Œå‚ä¸å¼€å‘ä¸ç»´æŠ¤ï¼

---

## ğŸ™ è‡´è°¢

ç‰¹åˆ«æ„Ÿè°¢ [ViveNAS é¡¹ç›®](https://github.com/cocalele/ViveNAS) ä¸ºæœ¬é¡¹ç›®æä¾›çš„çµæ„Ÿä¸å‚è€ƒã€‚

------

## ğŸ“« è”ç³»æˆ‘ä»¬

å¦‚æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·æäº¤ issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚
